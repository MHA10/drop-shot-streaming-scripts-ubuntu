#!/bin/bash
# RTSP SSE Streaming Configuration File
# This file contains configuration variables for the rtsp-sse-stream.sh script

# RTSP Input Configuration
# The RTSP stream URL to read from
RTSP_INPUT="rtsp://192.168.1.100:8554/stream"

# RTMP Output Configuration
# The RTMP destination URL for streaming
RTMP_OUTPUT="rtmp://live.twitch.tv/live/YOUR_STREAM_KEY"

# SSE Configuration
# Server-Sent Events endpoint URL for receiving parameter updates
# Leave empty to disable SSE functionality
SSE_URL="http://192.168.1.200:3000/events"

# Streaming Parameters
# Initial video bitrate in kbps (TSP parameter)
CURRENT_TSP="2500"

# Maximum bitrate in kbps (RAMP parameter)
CURRENT_RAMP="3000"

# Buffer size in kbps
CURRENT_BUFSIZE="4000"

# Process Management
# Delay in seconds before restarting crashed ffmpeg process
RESTART_DELAY="5"

# File Paths
# Named pipe for SSE parameter communication
SSE_PARAMS_PIPE="/tmp/rtsp_sse_params"

# Lock file to prevent multiple instances
LOCK_FILE="/tmp/rtsp-sse-stream.lock"

# PID file for process tracking
PID_FILE="/tmp/rtsp-sse-stream.pid"

# Logging Configuration
# Enable colored output (true/false)
COLOR_OUTPUT="true"

# Log level (DEBUG, INFO, WARN, ERROR)
LOG_LEVEL="INFO"

# FFmpeg Additional Options
# Additional ffmpeg parameters (optional)
FFMPEG_EXTRA_OPTS="-threads 2 -tune zerolatency"

# Network Configuration
# Connection timeout for SSE in seconds
SSE_TIMEOUT="30"

# Retry attempts for SSE connection
SSE_RETRY_ATTEMPTS="3"

# Retry delay for SSE connection in seconds
SSE_RETRY_DELAY="5"

# Resource Optimization for Raspberry Pi
# CPU usage limit (nice value: -20 to 19, higher = lower priority)
NICE_LEVEL="10"

# Memory limit for ffmpeg process (in MB, 0 = no limit)
MEMORY_LIMIT="512"

# Enable hardware acceleration if available (true/false)
HW_ACCEL="true"

# Hardware acceleration method (auto, h264_v4l2m2m, h264_omx)
HW_ACCEL_METHOD="auto"